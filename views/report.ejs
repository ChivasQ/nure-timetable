<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <title class="no-print">–ó–≤—ñ—Ç –ø–æ –∫–∞—Ñ–µ–¥—Ä—ñ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; }
            .container { max-width: 100%; }
            table { width: 100%; border-collapse: collapse; }
            th, td { border: 1px solid black; padding: 5px; }
        }
    </style>
</head>
<body class="bg-light p-4">

    <div class="no-print d-flex justify-content-between mb-4">
        <div>
            <a href="/admin" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
        </div>
        <div>
            <button onclick="window.print()" class="btn btn-success">üñ®Ô∏è –î—Ä—É–∫—É–≤–∞—Ç–∏ –∑–≤—ñ—Ç</button>
        </div>
    </div>

    <div class="card no-print mb-4 p-3 shadow-sm">
        <form action="/admin/report" method="GET" class="row g-3 align-items-end">
            <div class="col-md-4">
                <label class="form-label">–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ñ–µ–¥—Ä—É</label>
                <select name="department_id" class="form-select" required>
                    <% departments.forEach(d => { %>
                        <option value="<%= d.id %>" <%= query.department_id == d.id ? 'selected' : '' %>>
                            <%= d.full_name %>
                        </option>
                    <% }) %>
                </select>
            </div>
            <div class="col-md-3">
                <label class="form-label">–ó –¥–∞—Ç–∏</label>
                <input type="date" name="start_date" class="form-control" value="<%= query.start_date %>" required>
            </div>
            <div class="col-md-3">
                <label class="form-label">–ü–æ –¥–∞—Ç—É</label>
                <input type="date" name="end_date" class="form-control" value="<%= query.end_date %>" required>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100">–°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏</button>
            </div>
        </form>
    </div>

    <% if (reportData) { %>
        <div class="bg-white p-4 border rounded">
            <h3 class="text-center mb-4">–ó–≤—ñ—Ç –ø—Ä–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h3>
            <p><strong>–ü–µ—Ä—ñ–æ–¥:</strong> <%= query.start_date %> ‚Äî <%= query.end_date %></p>
            
            <% if (reportData.length > 0) { %>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>–î–∞—Ç–∞</th>
                            <th>–ß–∞—Å</th>
                            <th>–í–∏–∫–ª–∞–¥–∞—á</th>
                            <th>–ü—Ä–µ–¥–º–µ—Ç</th>
                            <th>–¢–∏–ø</th>
                            <th>–ì—Ä—É–ø–∏</th>
                            <th>–ê—É–¥.</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% reportData.forEach(row => { %>
                            <tr>
                                <td><%= new Date(row.schedule_date).toLocaleDateString('uk-UA') %></td>
                                <td><%= row.start_time.slice(0,5) %></td>
                                <td><%= row.teacher_name %></td>
                                <td><%= row.subject_name %></td>
                                <td><%= row.type_name %></td>
                                <td><%= row.groups_list %></td>
                                <td><%= row.room_number %></td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            <% } else { %>
                <div class="alert alert-warning text-center">–ó–∞–ø–∏—Å—ñ–≤ –∑–∞ —Ü–µ–π –ø–µ—Ä—ñ–æ–¥ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</div>
            <% } %>
        </div>
    <% } %>

</body>
</html>